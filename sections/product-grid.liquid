{% schema %}
{
  "name": "Products",
  "settings": [
	{
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Products"
    },
    {
	   "type": "product",
	   "id": "feature_product",
	   "label": "Featured product",
	   "info": "The featured product will be given more prominence on the page."
	},
	{
	    "type":      "range",
	    "id":        "featured_position",
	    "min":       1,
	    "max":       10,
	    "step":       1,
	    "label":     "Position",
	    "default":   1,
	    "info": "Select the position of the featured product in the grid."
	},
	{
   "type": "collection",
   "id": "feature_collection",
   "label": "Featured collection"
}

  ],
  "presets": [
    {
      "name": "Product Grid",
      "category": "Products"
    }
  ]
}
{% endschema %}
     
    {% assign collection = collections[section.settings.feature_collection] %}

    <section class="ecommerces pt-100 pt-lg-140" id="ecommerces-1">
        <div class="container">
	        
            <h1>{{ section.settings.heading }}</h1>
          
            {% if collection.description.size > 0 %}
			{{ collection.description }}
			{% endif %}
			
            <div class="row">
					
				  {% for product in collection.products %}
				      {% if product.handle == section.settings.feature_product %}
				      {% capture featured %}
				      {% include 'product-item-featured' %}
				      {% endcapture %}
				      {% endif %}
				  {% endfor %}
				  
				  {%- assign count = 0 -%}
				  {%- assign position = section.settings.featured_position -%}
				  {% for product in collection.products %}
				      {% if product.handle != section.settings.feature_product %}
				      {% assign count = count | plus: 1 %}
				      {% if count == position %} {{ featured }} {% endif %}
				      {% include 'product-item-no-buttons' %}
				      {% endif %}
				  {% else %}
				    <div class="col-12"><h2>There are no products in this view.</h2></div>
				  {% endfor %}

            </div>           
           
        </div>
    </section>
    

